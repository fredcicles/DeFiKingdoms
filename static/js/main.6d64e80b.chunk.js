(this["webpackJsonphero-analyzer"]=this["webpackJsonphero-analyzer"]||[]).push([[0],{151:function(e,n,t){},191:function(e,n){},220:function(e,n,t){},227:function(e,n,t){},228:function(e,n,t){},229:function(e,n,t){},231:function(e,n,t){"use strict";t.r(n);var a,s=t(1),r=t.n(s),i=t(43),o=t.n(i),c=(t(151),t(54)),l=t(15),u=t(5),m=t.n(u),h=t(35),d=t(44),j=t(69),b="https://defi-kingdoms-community-api-gateway-co06z8vi.uc.gateway.dev/graphql",v=function(){var e=Object(c.a)(m.a.mark((function e(){var n,t,s,r,i,o,c,l,u,h,v=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.length>0&&void 0!==v[0]?v[0]:"sale",t=v.length>1&&void 0!==v[1]?v[1]:[],s=v.length>2&&void 0!==v[2]?v[2]:50,r=v.length>3&&void 0!==v[3]?v[3]:0,console.log("Retrieving hero listings ".concat(r+1," - ").concat(r+s," from the Tavern")),i={headers:{"Content-Type":"application/json"}},o=new j.GraphQLClient(b,i),c="".concat(n,"Price_not: null"),t.length&&(c="".concat(c,"\n    mainClass_in: [").concat(t.map((function(e){return'"'.concat(e,'"')})),"]")),l="price: ".concat(n,"Price"),u=Object(j.gql)(a||(a=Object(d.a)(["\n\t{\n    heroes(\n      first: ","\n      skip: ","\n      where:{\n        ","\n      }\n    )\n    {\n      id\n      owner{\n        name\n      }\n      firstName\n      lastName\n      rarity\n      gender\n      generation\n      mainClass\n      subClass\n      level\n      profession\n      fishing\n      foraging\n      gardening\n      mining\n  \n      stamina\n  \n      summonsRemaining\n      maxSummons\n      summons\n      \n      active1\n      active2\n      passive1\n      passive2\n      statBoost1\n      statBoost2\n      statsUnknown1\n      statsUnknown2\n  \n      strength\n      agility\n      endurance\n      wisdom\n      dexterity\n      vitality\n      intelligence\n      luck\n\n      ","\n      status\n      hpFullAt\n      mpFullAt\n      statGenesRaw: statGenes\n    }\n  }"])),s,r,c,l),e.next=13,o.request(u);case 13:return h=e.sent,console.log("".concat(h.heroes.length," hero listings retrieved from the Tavern")),e.abrupt("return",h);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=t(21),f=t(98),O=[{classes:["warrior","knight"],mutation:"paladin"},{classes:["thief","archer"],mutation:"darkKnight"},{classes:["priest","wizard"],mutation:"summoner"},{classes:["monk","pirate"],mutation:"ninja"},{classes:["paladin","darkKnight"],mutation:"dragoon"},{classes:["summoner","ninja"],mutation:"sage"},{classes:["dragoon","sage"],mutation:"dreadKnight"}],p=[.75,.1875,.046875,.015625],x={basic:.25,advanced:.25,elite:.125,exalted:.125},C=function(e){return e.map((function(e,n){return{name:e,value:p[n]}}))},N=function(e){return e.reduce((function(e,n,t){var a=e.find((function(e){return e.name===n.name}));return a?(a.value+=n.value,e):[].concat(Object(g.a)(e),[n])}),[])},S=function(e,n){var t=w(e.name,n.name);if(t){var a=x[Object(f.getHeroTier)(e.name)];return{name:t.mutation,value:e.value*n.value*a}}return null},w=function(e,n){return O.find((function(t){return e!==n&&t.classes.includes(e)&&t.classes.includes(n)}))},y=function(e){return e.forEach((function(e){return e.value=e.value/2}))},T=function(e,n){var t={hero1:C(e),hero2:C(n)};return t.mutations=function(e,n){for(var t=[],a=0;a<4;a++){var s=S(e[a],n[a]);s&&(t.push(s),e[a].value-=s.value,n[a].value-=s.value)}return N(t)}(t.hero1,t.hero2),y(t.hero1),y(t.hero2),function(e){return N(e.hero1.concat(e.hero2,e.mutations)).sort((function(e,n){return e.value>n.value?-1:e.value<n.value?1:0}))}(t)},A=function(e,n,t){return T(e.mainClassGenes,n.mainClassGenes).find((function(e){return e.name===t.toLowerCase()}))},B=function(e,n){var t=[n];if(e.toLowerCase()===n.toLowerCase())return t;var a,s=O.find((function(e){return e.mutation.toLowerCase()===n.toLowerCase()}));if(s){var r=s.classes.find((function(n){return n===e})),i=s.classes.find((function(n){return n!==e}));r&&t.push("".concat((a=i)[0].toUpperCase()).concat(a.slice(1)))}return t},k=t(55),E=t(281),L=t(283),R=t(279),P=t(276),F=t(277),G=t(132),I=t.n(G),V=(t(220),t(4)),_=function(e){var n=e.onHeroChange,t=e.onSubmit,a=Object(s.useState)(""),r=Object(l.a)(a,2),i=r[0],o=r[1],c=Object(s.useState)("sale"),u=Object(l.a)(c,2),m=u[0],d=u[1],j=Object(s.useState)(""),b=Object(l.a)(j,2),v=b[0],f=b[1],O=Object(s.useState)([]),p=Object(l.a)(O,2),x=p[0],C=p[1];Object(s.useEffect)((function(){var e=k.basicClasses.sort().map((function(e){return Object(V.jsx)(R.a,{value:h.CONSTANTS.CLASS_REV[e],children:h.CONSTANTS.CLASS_REV[e]},e)})),n=k.advancedClasses.sort().map((function(e){return Object(V.jsx)(R.a,{value:h.CONSTANTS.CLASS_REV[e],children:h.CONSTANTS.CLASS_REV[e]},e)})),t=k.eliteClasses.sort().map((function(e){return Object(V.jsx)(R.a,{value:h.CONSTANTS.CLASS_REV[e],children:h.CONSTANTS.CLASS_REV[e]},e)})),a=k.exaltedClasses.sort().map((function(e){return Object(V.jsx)(R.a,{value:h.CONSTANTS.CLASS_REV[e],children:h.CONSTANTS.CLASS_REV[e]},e)})),s=[Object(V.jsx)(L.a,{children:"Basic Classes"},"basic")].concat(Object(g.a)(e),[Object(V.jsx)(L.a,{children:"Advanced Classes"},"advanced")],Object(g.a)(n),[Object(V.jsx)(L.a,{children:"Elite Classes"},"elite")],Object(g.a)(t),[Object(V.jsx)(L.a,{children:"Exalted Classes"},"exalted")],Object(g.a)(a));C(s)}),[]);var N=[Object(V.jsx)(R.a,{value:"sale",children:"sale"},"sale"),Object(V.jsx)(R.a,{value:"rent",children:"rent"},"rent")];return Object(V.jsxs)("div",{className:"SummonsMatchSearchForm",children:["Find me heroes for",Object(V.jsx)(P.a,{label:"Auction Type",name:"auction-type",className:"auction-type-selecter",value:m,variant:"standard",onChange:function(e){var n=e.target;d(n.value)},children:N}),"who could match with hero #",Object(V.jsx)("div",{className:"hero-id-selecter",children:Object(V.jsx)(F.a,{placeholder:"hero id",name:"hero-id",value:v,variant:"standard",onChange:function(e){var n=e.target;f(n.value)},onBlur:function(e){var t=e.target;n&&n(t.value)}})}),"to summon a",Object(V.jsx)(P.a,{label:"Class to be summoned",name:"summoned-class",className:"summoned-class-selecter",value:i,variant:"standard",onChange:function(e){var n=e.target;o(n.value)},children:x}),Object(V.jsx)(E.a,{variant:"contained",onClick:function(e){t&&t({auctionType:m,heroId:v,summonClass:i})},children:Object(V.jsx)(I.a,{})})]})},D=t(33),M=function(e){var n=e.children,t=e.className,a=e.title;return Object(V.jsxs)("div",{className:"hero-stat-section ".concat(t),children:[Object(V.jsx)("div",{className:"title",children:a}),Object(V.jsx)("div",{className:"stat-group",children:n})]})};M.defaultProps={className:"hero-stat-section"};var H=M,K=["D","R1","R2","R3"],z=0,W=2,q={mining:"Mining",foraging:"Foraging",gardening:"Gardening",fishing:"Fishing"},J=function(e){var n=e.className,t=e.genes,a=e.heroid,s=e.title,r=e.type;return Object(V.jsxs)("div",{className:"hero-snapshot-genes ".concat(n),children:[Object(V.jsx)("div",{className:"title",children:s}),t.map((function(e,n){var t=r===z?D.CLASS_REV[e]:r===W?q[e]:e;return t||(t=e),Object(V.jsxs)("div",{className:"gene",children:[Object(V.jsxs)("div",{className:"label",children:[K[n],":"]}),Object(V.jsx)("div",{className:"value",children:t})]},"".concat(a,"-").concat(K[n]))}))]})};J.defaultProps={type:0};var U=J,X=function(e){var n=e.name,t=e.value,a=e.main,s=e.minor,r="name".concat(a&&s?" main-minor":a?" main":s?" minor":"");return Object(V.jsxs)("div",{className:"hero-stat",children:[Object(V.jsx)("div",{className:r,children:n}),Object(V.jsx)("div",{className:"value",children:t})]})},Q=(t(227),["common","uncommon","rare","legendary","mythic"]),Y=function(e){var n,t=e.hero,a=e.title;return Object(V.jsxs)("div",{className:"hero-snapshot ".concat(Q[t.rarity]),children:[Object(V.jsx)("div",{className:"hero-snapshot-title",children:a}),Object(V.jsxs)("div",{className:"hero-snapshot-name",children:[t.name?t.name:"Main Hero"," (#",t.id,") ",t.price?"- J ".concat((n=t.price,Number(n)/1e18)):""]}),Object(V.jsxs)("div",{className:"hero-snapshot-grc",children:["Gen",t.generation," | ",D.Rarity[t.rarity]," | ",t.mainClass,"/",t.subClass]}),Object(V.jsxs)("div",{className:"hero-snapshot-owner",children:["Owned by: ",t.owner?t.owner.name:t.ownerName]}),Object(V.jsxs)("div",{className:"hero-snapshot-genes-section",children:[Object(V.jsx)(U,{genes:t.mainClassGenes,heroid:t.id,title:"Class"}),Object(V.jsx)(U,{genes:t.subClassGenes,heroid:t.id,title:"SubClass"}),Object(V.jsx)(U,{genes:t.professionGenes,heroid:t.id,title:"Profession",type:2})]}),Object(V.jsxs)(H,{title:"Stats",children:[Object(V.jsx)(X,{name:"STR",value:t.strength,main:"STR"===t.statBoost1,minor:"STR"===t.statBoost2}),Object(V.jsx)(X,{name:"AGI",value:t.agility,main:"AGI"===t.statBoost1,minor:"AGI"===t.statBoost2}),Object(V.jsx)(X,{name:"END",value:t.endurance,main:"END"===t.statBoost1,minor:"END"===t.statBoost2}),Object(V.jsx)(X,{name:"WIS",value:t.wisdom,main:"WIS"===t.statBoost1,minor:"WIS"===t.statBoost2}),Object(V.jsx)(X,{name:"DEX",value:t.dexterity,main:"DEX"===t.statBoost1,minor:"DEX"===t.statBoost2}),Object(V.jsx)(X,{name:"VIT",value:t.vitality,main:"VIT"===t.statBoost1,minor:"VIT"===t.statBoost2}),Object(V.jsx)(X,{name:"INT",value:t.intelligence,main:"INT"===t.statBoost1,minor:"INT"===t.statBoost2}),Object(V.jsx)(X,{name:"LCK",value:t.luck,main:"LCK"===t.statBoost1,minor:"LCK"===t.statBoost2})]}),Object(V.jsxs)(H,{className:"profession-stat-section",title:"Professions",children:[Object(V.jsx)(X,{name:"Mining",value:t.mining,main:"mining"===t.profession}),Object(V.jsx)(X,{name:"Fishing",value:t.fishing,main:"fishing"===t.profession}),Object(V.jsx)(X,{name:"Gardening",value:t.gardening,main:"gardening"===t.profession}),Object(V.jsx)(X,{name:"Foraging",value:t.foraging,main:"foraging"===t.profession})]})]})},Z=function(e){var n=e.heroes,t=function(e){return"".concat((100*e.targetProbability.value).toFixed(2),"% probability")};return n.length?n.map((function(e){return Object(V.jsx)(Y,{hero:e,title:t(e)},e.id)})):null},$=(t(228),t(72)),ee=["Now there is an interesting fellow.","Oh, the Tavern has Perch Porter on draft.","Chatting with Agent Selina.  She is such a sweetheart!","Are those wings on her back, or she just harpy to see me?","Woah, big guy!  Careful with those horns!"],ne=function(e){var n=e.hero;return n?Object(V.jsx)("div",{className:"main-hero",children:Object(V.jsx)(Y,{hero:n,title:"Main Hero"})}):null},te=function(e){var n=e.heroCount,t=e.loaded,a=e.loading,s=e.message,r=a?s:t&&!n?"No Heroes Found":null;return Object(V.jsx)("div",{className:"loading-message",children:r})},ae=function(){var e=Object(s.useState)(!1),n=Object(l.a)(e,2),t=n[0],a=n[1],r=Object(s.useState)(!1),i=Object(l.a)(r,2),o=i[0],u=i[1],d=Object(s.useState)(""),j=Object(l.a)(d,2),b=j[0],g=j[1],f=Object(s.useState)(),O=Object(l.a)(f,2),p=O[0],x=O[1],C=Object(s.useState)([]),N=Object(l.a)(C,2),S=N[0],w=N[1],y=function(){var e=Object(c.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return x(),e.next=4,Object(h.getHeroesChain)([n]);case 4:t=e.sent,x(t[0]);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),T=function(){var e=Math.floor(Math.random()*ee.length);g(ee[e])},k=function(e){return new Promise((function(n){return setTimeout(n,e)}))},E=function(){var e=Object(c.a)(m.a.mark((function e(n){var t,s,r,i,o,c,l,h,d,j;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w([]),a(!0),T(),t=[],s=50,r=0,i=!1;case 7:if(i){e.next=28;break}return o=B(p.mainClass,n.summonClass),e.next=11,v(n.auctionType,o,s,r);case 11:for(c=e.sent,l=Object($.decodeRecessiveGenesAndNormalize)(c.heroes),h=0;h<l.length;h++)(d=l[h]).targetProbability=A(p,d,n.summonClass);return j=l.filter((function(e){return e.targetProbability})),console.log("".concat(t.length," existing heroes")),console.log("adding ".concat(j.length," new heroes")),t=t.concat(j).sort((function(e,n){return e.targetProbability.value>n.targetProbability.value?-1:e.targetProbability.value<n.targetProbability.value?1:0})),console.log("now ".concat(t.length," total heroes")),w(t),T(),r+=s,i=0===c.length,e.next=25,k(1e3);case 25:i=r>200,e.next=7;break;case 28:a(!1),u(!0);case 30:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(_,{onHeroChange:y,onSubmit:E}),Object(V.jsx)(te,{heroCount:S.length,loading:t,loaded:o,message:b}),Object(V.jsxs)("div",{className:"hero-list",children:[Object(V.jsx)(ne,{hero:p}),Object(V.jsx)(Z,{heroes:S})]})]})},se=ae;t(229);var re=function(){return Object(V.jsxs)("div",{className:"App",children:[Object(V.jsx)("header",{className:"App-header"}),Object(V.jsx)("main",{className:"App-main",children:Object(V.jsx)(se,{})})]})},ie=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,286)).then((function(n){var t=n.getCLS,a=n.getFID,s=n.getFCP,r=n.getLCP,i=n.getTTFB;t(e),a(e),s(e),r(e),i(e)}))};o.a.render(Object(V.jsx)(r.a.StrictMode,{children:Object(V.jsx)(re,{})}),document.getElementById("root")),ie()}},[[231,1,2]]]);
//# sourceMappingURL=main.6d64e80b.chunk.js.map